#!/bin/bash
#------------------------------------------------------------
#
#                     Control 
#
#------------------------------------------------------------
#ii="0"
BC_start=50
BC_max=650
BC_step=50
lstop=0
TTW_start=11
awk -v var="$TTW_start" '{if(NR==9)for(i=1;i<=NF;i++) $1=var; print $0}' INPUT/c_ship.dat > c_ship.dat
mv c_ship.dat INPUT/
#------------------------------------------------------------
if [ -e loop_res.dat ] ; then
rm loop_res.dat
fi 
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
BC=$BC_start
while [ $lstop -eq 0 ] ; do
echo
echo " ------------------- BC " $BC " -----------------------"
echo
#------------------------------------------------------------
#                     Set BC
#-----------------------------------------------------------
awk -v var="$BC" '{if(NR==2)for(i=1;i<=NF;i++) $1=var; print $0}' INPUT/c_ship.dat > c_ship.dat
mv c_ship.dat INPUT/
#-----------------------------------------------------------
# Set Heatshield mass: 
# mheatshield=$(echo print 0.3*$m0 | perl)
#-----------------------------------------------------------
#++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
./mass_loop.sh
#++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
#   Write results
./write_results.exe >> loop_res.dat
#------------------------------------------------------------
BC=$(echo $BC + $BC_step | bc )  
#ii=$[ $ii + 1]
if [ $BC -gt $BC_max ] ; then
lstop=1
fi
done
#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


